<%- include('../../partials/header', { title }) %>

<!-- Admin Header -->
<section class="section" style="background: linear-gradient(135deg, var(--primary-yellow), var(--secondary-yellow)); color: var(--dark-blue); padding: 2rem 0;">
  <div class="container">
    <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;">
      <div>
        <h1 style="color: var(--dark-blue); margin: 0 0 0.5rem 0;">âœï¸ Edit Program</h1>
        <p style="color: var(--dark-blue); opacity: 0.8; margin: 0;">Update program details and information</p>
      </div>
      <div style="display: flex; gap: 1rem; align-items: center;">
        <a href="/admin/programs" class="btn" style="background: var(--dark-blue); color: var(--white);">â† Back to Programs</a>
        <a href="/programs/<%= row.slug %>" class="btn btn-outline" style="border-color: var(--dark-blue); color: var(--dark-blue);" target="_blank">ğŸ‘ï¸ View Program</a>
      </div>
    </div>
  </div>
</section>

<!-- Form Section -->
<section class="section">
  <div class="container">
    <div style="max-width: 800px; margin: 0 auto;">
      <div class="card">
        <h2 style="margin: 0 0 2rem 0; color: var(--dark-blue);">Program Details</h2>

        <% if (row.cover_path) { %>
          <div style="margin-bottom: 2rem;">
            <p style="margin: 0 0 1rem 0; font-weight: 600;">Current Cover Image:</p>
            <img src="<%= row.cover_path %>" alt="<%= row.title %>" style="max-width: 200px; height: auto; border-radius: var(--border-radius); border: 1px solid var(--light-gray);" />
          </div>
        <% } %>

        <form method="post" action="/admin/programs/<%= row.id %>" enctype="multipart/form-data">
          <div class="form-group">
            <label for="title">ğŸ“š Program Title *</label>
            <input
              id="title"
              name="title"
              required
              value="<%= row.title %>"
              placeholder="Enter the program title"
            />
            <small style="color: var(--text-gray); font-size: 0.85rem;">
              This will be displayed as the main heading for your program
            </small>
          </div>

          <div class="form-group">
            <label for="summary">ğŸ“ Program Summary</label>
            <textarea
              id="summary"
              name="summary"
              rows="3"
              placeholder="Brief description of the program (optional)"
            ><%= row.summary || '' %></textarea>
            <small style="color: var(--text-gray); font-size: 0.85rem;">
              A short summary that appears in program listings
            </small>
          </div>

          <div class="form-group">
            <label for="body_md">ğŸ“„ Detailed Description (Markdown)</label>
            <textarea
              id="body_md"
              name="body_md"
              rows="10"
              placeholder="Detailed description of the program using Markdown formatting"
            ><%= row.body_md || '' %></textarea>
            <small style="color: var(--text-gray); font-size: 0.85rem;">
              Use Markdown syntax for formatting. This will be the main content of the program page.
            </small>
          </div>

          <div class="form-group">
            <label for="cover">ğŸ–¼ï¸ Cover Image</label>
            <input
              id="cover"
              type="file"
              name="cover"
              accept="image/*"
            />
            <small style="color: var(--text-gray); font-size: 0.85rem;">
              Upload a new image to replace the current cover image (JPG, PNG, GIF)
            </small>
          </div>

          <div style="display: flex; gap: 1rem; margin-top: 2rem;">
            <button class="btn" type="submit" style="background: var(--success-green);">
              ğŸ’¾ Save Changes
            </button>
            <a href="/admin/programs" class="btn btn-outline">
              âŒ Cancel
            </a>
          </div>
        </form>
      </div>
    </div>
  </div>
</section>

<%- include('../../partials/footer') %>
